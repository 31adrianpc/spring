<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title><span th:text="${accion}"></span> Usuario</title>
    </head>
    <body>
        <h1><span th:text="${accion}"></span> Usuario</h1>
        <div>
            <!--Obtenemos el objeto nuevoUsuario desde el controlador, enviamos los datos
            a la URL guardarUsuario -->
            <!--El path en label internamente realiza un for(HTML) para asociarlo con el input. Además, debe ser un atributo del objeto nuevoUsuario
                El enctype="..." indica que el formulario enviará datos binarios, por ello
                el nombre de multipart. De esta forma, es posible enviar archivos -->
            <form action="guardarUsuario" th:object="${nuevoUsuario}" enctype="multipart/form-data" method="post">
                <fieldset>
                    <table>
                        <tr>
                            <td>
                                <label for="user">Usuario:</label>
                                <input hidden th:field="*{idUsuario}"/>
                                <input hidden th:field="*{foto}"/>
                                <input hidden th:field="*{estado}"/>
                                <!-- name accion es lo que nos permite recuperar la accion.
                                name=accion define el nombre del parametro que se enviará
                                en la petición HTTP y value su valor.-->
                                <input type="text" hidden th:value="${accion}">
                            </td>
                            <td>
                                <input th:field="*{user}" type="text"/>
                                <span th:if="${#fields.hasErrors('user')}" th:errors="*{user}"></span>
                                <!-- <mvc:errors path="user" cssStyle="color:red"/> -->
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="password">Contraseña:</label>
                            </td>
                            <td>
                                <input th:field="*{password}" type="password"/>
                                <span th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="nombreApellido">Nombre y apellidos:</label>
                            </td>
                            <td>
                                <input th:field="*{nombreApellido}" type="text"/>
                                <span th:if="${#fields.hasErrors('nombreApellido')}" th:errors="*{nombreApellido}"></span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Cargar foto:</label>
                            </td>
                            <td>
                                <input type="file" name="archivo" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <input type="submit" value="Grabar" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <label th:text="${msgError}" style="color:red"></label>
                            </td>
                        </tr>
                    </table>
                </fieldset>
            </form>
        </div>
    </body>
</html>
